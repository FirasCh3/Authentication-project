{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from \"@angular/forms\";\nexport let LoginComponent = class LoginComponent {\n  ngOnInit() {\n    localStorage.removeItem(\"token\");\n  }\n  constructor(Request, router) {\n    this.Request = Request;\n    this.router = router;\n    this.group = new FormGroup({\n      email: new FormControl(null, [Validators.required, Validators.email]),\n      password: new FormControl(null, [Validators.required, Validators.minLength(8)])\n    }, [], this.restricted.bind(this));\n  }\n  UserDoesNotExist(UserData, UserInput) {\n    let i = 0;\n    let UserExistenceTest = false;\n    while (i < UserData.length && !UserExistenceTest) {\n      if (UserInput.email == UserData[i].email && UserInput.password == UserData[i].password) {\n        UserExistenceTest = true;\n      } else {\n        i++;\n      }\n    }\n    return UserExistenceTest;\n  }\n  restricted(control) {\n    let UserData;\n    let UserInput = control.value;\n    this.Request.GetAllUsers().subscribe(data => {\n      UserData = data;\n    });\n    let promise = new Promise((resolve, reject) => {\n      setTimeout(() => {\n        if (!this.UserDoesNotExist(UserData, UserInput)) {\n          resolve({\n            error: false\n          });\n        } else {\n          resolve(null);\n        }\n      }, 1000);\n    });\n    return promise;\n  }\n  submit(info) {\n    this.Request.Login(info).subscribe(response => {\n      if (response != null) {\n        localStorage.setItem('token', response.token);\n        this.router.navigate([\"/home\"]);\n      }\n    });\n  }\n  SignUp() {\n    this.router.navigate([\"/signup\"]);\n  }\n};\nLoginComponent = __decorate([Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})], LoginComponent);","map":{"version":3,"names":["Component","FormControl","FormGroup","Validators","LoginComponent","ngOnInit","localStorage","removeItem","constructor","Request","router","group","email","required","password","minLength","restricted","bind","UserDoesNotExist","UserData","UserInput","i","UserExistenceTest","length","control","value","GetAllUsers","subscribe","data","promise","Promise","resolve","reject","setTimeout","error","submit","info","Login","response","setItem","token","navigate","SignUp","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\user\\Desktop\\SpringBootProject\\src\\main\\resources\\my-app\\src\\app\\login\\login.component.ts"],"sourcesContent":["import {Component, OnInit} from '@angular/core';\nimport {httpRequests} from \"../http\";\nimport {AbstractControl, FormControl, FormGroup, Validators} from \"@angular/forms\";\nimport {Observable} from \"rxjs\";\nimport {Router} from \"@angular/router\";\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})\nexport class LoginComponent implements OnInit{\n  ngOnInit() {\n    localStorage.removeItem(\"token\");\n  }\n\n  constructor(private Request:httpRequests,private router:Router) {\n  }\n  group=new FormGroup({\n    email:new FormControl(null,[Validators.required,Validators.email]),\n    password:new FormControl(null,[Validators.required,Validators.minLength(8)])\n  },[],this.restricted.bind(this));\n  UserDoesNotExist(UserData:any,UserInput:any):boolean{\n    let i=0;\n    let UserExistenceTest:boolean=false;\n    while(i<UserData.length && !UserExistenceTest){\n      if(UserInput.email==UserData[i].email && UserInput.password==UserData[i].password){\n        UserExistenceTest=true;\n      }else{\n        i++;\n      }\n    }\n    return UserExistenceTest;\n  }\n  restricted(control:AbstractControl):Promise<any>|Observable<any>{\n    let UserData:any;\n    let UserInput = control.value;\n    this.Request.GetAllUsers().subscribe((data)=>{\n      UserData=data;\n\n    })\n    let promise = new Promise((resolve,reject) => {\n\n      setTimeout(() => {\n        if(!this.UserDoesNotExist(UserData,UserInput)){\n          resolve({error:false})\n        }else{\n          resolve(null);\n        }\n\n\n\n      }, 1000)\n    });\n    return promise;\n  }\n  submit(info:any){\n      this.Request.Login(info).subscribe((response:any)=>{\n        if(response!=null){\n          localStorage.setItem('token',response.token);\n          this.router.navigate([\"/home\"]);\n        }\n      })\n  }\n  SignUp(){\n    this.router.navigate([\"/signup\"]);\n  }\n\n}\n"],"mappings":";AAAA,SAAQA,SAAS,QAAe,eAAe;AAE/C,SAAyBC,WAAW,EAAEC,SAAS,EAAEC,UAAU,QAAO,gBAAgB;AAS3E,WAAMC,cAAc,GAApB,MAAMA,cAAc;EACzBC,QAAQA,CAAA;IACNC,YAAY,CAACC,UAAU,CAAC,OAAO,CAAC;EAClC;EAEAC,YAAoBC,OAAoB,EAASC,MAAa;IAA1C,KAAAD,OAAO,GAAPA,OAAO;IAAsB,KAAAC,MAAM,GAANA,MAAM;IAEvD,KAAAC,KAAK,GAAC,IAAIT,SAAS,CAAC;MAClBU,KAAK,EAAC,IAAIX,WAAW,CAAC,IAAI,EAAC,CAACE,UAAU,CAACU,QAAQ,EAACV,UAAU,CAACS,KAAK,CAAC,CAAC;MAClEE,QAAQ,EAAC,IAAIb,WAAW,CAAC,IAAI,EAAC,CAACE,UAAU,CAACU,QAAQ,EAACV,UAAU,CAACY,SAAS,CAAC,CAAC,CAAC,CAAC;KAC5E,EAAC,EAAE,EAAC,IAAI,CAACC,UAAU,CAACC,IAAI,CAAC,IAAI,CAAC,CAAC;EAJhC;EAKAC,gBAAgBA,CAACC,QAAY,EAACC,SAAa;IACzC,IAAIC,CAAC,GAAC,CAAC;IACP,IAAIC,iBAAiB,GAAS,KAAK;IACnC,OAAMD,CAAC,GAACF,QAAQ,CAACI,MAAM,IAAI,CAACD,iBAAiB,EAAC;MAC5C,IAAGF,SAAS,CAACR,KAAK,IAAEO,QAAQ,CAACE,CAAC,CAAC,CAACT,KAAK,IAAIQ,SAAS,CAACN,QAAQ,IAAEK,QAAQ,CAACE,CAAC,CAAC,CAACP,QAAQ,EAAC;QAChFQ,iBAAiB,GAAC,IAAI;OACvB,MAAI;QACHD,CAAC,EAAE;;;IAGP,OAAOC,iBAAiB;EAC1B;EACAN,UAAUA,CAACQ,OAAuB;IAChC,IAAIL,QAAY;IAChB,IAAIC,SAAS,GAAGI,OAAO,CAACC,KAAK;IAC7B,IAAI,CAAChB,OAAO,CAACiB,WAAW,EAAE,CAACC,SAAS,CAAEC,IAAI,IAAG;MAC3CT,QAAQ,GAACS,IAAI;IAEf,CAAC,CAAC;IACF,IAAIC,OAAO,GAAG,IAAIC,OAAO,CAAC,CAACC,OAAO,EAACC,MAAM,KAAI;MAE3CC,UAAU,CAAC,MAAK;QACd,IAAG,CAAC,IAAI,CAACf,gBAAgB,CAACC,QAAQ,EAACC,SAAS,CAAC,EAAC;UAC5CW,OAAO,CAAC;YAACG,KAAK,EAAC;UAAK,CAAC,CAAC;SACvB,MAAI;UACHH,OAAO,CAAC,IAAI,CAAC;;MAKjB,CAAC,EAAE,IAAI,CAAC;IACV,CAAC,CAAC;IACF,OAAOF,OAAO;EAChB;EACAM,MAAMA,CAACC,IAAQ;IACX,IAAI,CAAC3B,OAAO,CAAC4B,KAAK,CAACD,IAAI,CAAC,CAACT,SAAS,CAAEW,QAAY,IAAG;MACjD,IAAGA,QAAQ,IAAE,IAAI,EAAC;QAChBhC,YAAY,CAACiC,OAAO,CAAC,OAAO,EAACD,QAAQ,CAACE,KAAK,CAAC;QAC5C,IAAI,CAAC9B,MAAM,CAAC+B,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC;;IAEnC,CAAC,CAAC;EACN;EACAC,MAAMA,CAAA;IACJ,IAAI,CAAChC,MAAM,CAAC+B,QAAQ,CAAC,CAAC,SAAS,CAAC,CAAC;EACnC;CAED;AAzDYrC,cAAc,GAAAuC,UAAA,EAL1B3C,SAAS,CAAC;EACT4C,QAAQ,EAAE,WAAW;EACrBC,WAAW,EAAE,wBAAwB;EACrCC,SAAS,EAAE,CAAC,uBAAuB;CACpC,CAAC,C,EACW1C,cAAc,CAyD1B"},"metadata":{},"sourceType":"module","externalDependencies":[]}